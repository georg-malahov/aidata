
<div ng-if="$root.preloading.page !== false" class="preloader">
  <div class="preloader_veil"></div>
  <div class="preloader_message"><img src="img/dots_preloader.gif" alt=""/><span>Loading, please wait ...</span></div>
</div>
<div class="header">
  <div class="header_wrapper">
    <div class="logo"><a ui-sref="dashboard.adaccounts"><img src="img/logo.png" alt="Aidata logo" height="46px;"/></a></div>
    <div class="user"><span class="user_name ng-cloak">[[$root.userName]]</span><a href="javascript: void 0;"><img src="img/icons/icon-logout.png" alt="Logout icon" class="log-out-icon"/></a></div>
  </div>
</div>
<div ng-controller="MainController" ng-class="{'content__visible': $root.preloading.page == false}" class="content">
  <div class="content_inner">
    <div ng-controller="TableController" class="table">
      <div ng-show="!$root.preloading.page" class="tablecontrols ng-cloak">
        <script type="text/ng-template" id="modal.html">
          <div class="modal-header">
            <h3 class="modal-title">[[modalTitle]]</h3>
          </div>
          <div class="modal-body">
            <form role="form" id="pixel-form" action="#" method="get" class="pixelCreateForm">
              <div class="basic-option row">
                <div class="form-group col-lg-6 col-md-6">
                  <label class="control-label">Pixel ID</label>
                  <input type="text" name="id" data-fv-server="[[!!pixel.errors.id]]" data-fv-server-message="[[pixel.errors.id]]" ng-model="pixel.pixel_id" no-edit="mode == 'edit'" placeholder="Identifier for a new pixel" role="input" class="form-control"/>
                </div>
                <div class="form-group col-lg-6 col-md-6">
                  <label class="control-label">Name</label>
                  <input type="text" name="name" data-fv-server="[[!!pixel.errors.name]]" data-fv-server-message="[[pixel.errors.name]]" ng-model="pixel.name" placeholder="Displayed name" role="input" class="form-control"/>
                </div>
              </div>
              <div class="sharing-options">
                <h4 class="sharing-options_header">Sharing options</h4>
                <hr class="hr"/>
                <div ng-repeat="option in pixelOptions track by $index" class="sharing-option row">
                  <div class="sharing-option-inner col-lg-12 col-md-12">
                    <div class="form-group col-lg-6 col-md-6">
                      <label class="control-label">Customer</label>
                      <div class="input-group">
                        <input type="hidden" disabled="disabled" name="unique[]" value="[[option.customer.unique]]" class="form-control"/>
                        <div dropdown="dropdown" class="input-group-btn">
                          <input type="hidden" data-fv-server="[[!!option.errors.type]]" data-fv-server-message="[[option.errors.type]]" value="[[option.customer.type]]" name="id_externals-[[$index]]-type" id="id_externals-[[$index]]-type" class="form-control"/>
                          <button type="button" no-edit="mode == 'edit' &amp;&amp; !option.new" dropdown-toggle="dropdown-toggle" class="btn btn-default dropdown-toggle">[[(customers | filter: {type:option.customer.type})[0].name]]<span class="caret"></span></button>
                          <ul role="menu" class="dropdown-menu">
                            <li ng-repeat="customer in customers" ng-class="{active: $parent.option.customer.type == customer.type }" ng-click="$parent.option.customer = customer"><span ng-bind="customer.name"></span></li>
                          </ul>
                        </div>
                        <input type="text" no-edit="mode == 'edit' &amp;&amp; !option.new" id="id_externals-[[$index]]-customer_id" name="id_externals-[[$index]]-customer_id" ng-model="option.customer.id" data-fv-server="[[!!option.errors.customer_id]]" data-fv-server-message="[[option.errors.customer_id]]" data-fv-notempty="true" data-fv-notempty-message="Customer ID is required." data-fv-digits="true" data-fv-digits-message="Customer ID value can contain only digits." placeholder="Customer ID" role="input" class="form-control form-control__custom"/>
                      </div>
                    </div>
                    <div class="form-group col-lg-5 col-md-5">
                      <label class="control-label">Cost</label>
                      <div class="input-group">
                        <div dropdown="dropdown" class="input-group-btn">
                          <input type="hidden" value="[[option.cpm.currency]]" data-fv-server="[[!!option.errors.currency]]" data-fv-server-message="[[option.errors.currency]]" id="id_externals-[[$index]]-currency" name="id_externals-[[$index]]-currency" class="form-control"/>
                          <button type="button" no-edit="mode == 'edit' &amp;&amp; !option.new" dropdown-toggle="dropdown-toggle" class="btn btn-default dropdown-toggle">[[(currencies | filter: {id:option.cpm.currency})[0].name]]<span class="caret"></span></button>
                          <ul role="menu" class="dropdown-menu">
                            <li ng-repeat="currency in currencies" ng-class="{active: $parent.option.cpm.currency == currency.id }" ng-click="$parent.option.cpm.currency = currency.id"><span ng-bind="currency.name"></span></li>
                          </ul>
                        </div>
                        <input type="text" role="input" id="id_externals-[[$index]]-cost" name="id_externals-[[$index]]-cost" ng-model="option.cpm.cost" data-fv-server="[[!!option.errors.cost]]" data-fv-server-message="[[option.errors.cost]]" data-fv-notempty="true" data-fv-notempty-message="Cost value is required." data-fv-regexp="true" data-fv-regexp-regexp="^[0-9]{0,5}.?[0-9]{1,2}$" data-fv-regexp-message="Cost value must be numeric and can't have less than 1 or more than 2 decimal places." data-fv-lessthan="true" data-fv-lessthan-inclusive="true" data-fv-lessthan-value="99999.99" data-fv-lessthan-message="Please enter a value less than or equal to 99999.99" placeholder="Cost Value" class="form-control form-control__custom"/>
                      </div>
                    </div>
                    <div class="sharing-option_actions form-group col-lg-1 col-md-1">
                      <label ng-show="option.new" class="control-label">Remove</label>
                      <label ng-show="!option.new" for="id_externals-[[$index]]-enabled" class="control-label">Active</label>
                      <input type="hidden" id="id_externals-[[$index]]-id" name="id_externals-[[$index]]-id" value="[[option.id || 0]]"/>
                      <div ng-click="removeOption($index)" ng-show="option.new" class="sharing-option_action sharing-option_action__trash"><span aria-hidden="true" class="glyphicon glyphicon-trash"></span></div>
                      <div ng-show="!option.new" class="sharing-option_action sharing-option_action__checkbox">
                        <input type="checkbox" id="id_externals-[[$index]]-enabled" name="id_externals-[[$index]]-enabled" ng-model="option.enabled"/>
                        <input type="hidden" id="id_externals-[[$index]]-enabled" ng-if="!option.enabled" name="id_externals-[[$index]]-enabled" ng-model="option.enabled"/>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="sharing-options_add">
                  <div ng-click="pixelOptions.push(getDefaultOption())" class="btn btn-sm btn-success">Add Option</div>
                </div>
              </div>
              <input id="id_externals-TOTAL_FORMS" name="externals-TOTAL_FORMS" type="hidden" value="[[pixelOptions.length]]" autocomplete="off"/>
              <input id="id_externals-INITIAL_FORMS" name="externals-INITIAL_FORMS" type="hidden" ng-init="optionsCountInitial = pixelOptions.length" value="[[optionsCountInitial]]"/>
              <input id="id_externals-MIN_NUM_FORMS" name="externals-MIN_NUM_FORMS" type="hidden" value="0"/>
              <input id="id_externals-MAX_NUM_FORMS" name="externals-MAX_NUM_FORMS" type="hidden" value="1000"/>
              <div class="modal-footer row">
                <button type="submit" class="btn btn-primary">OK</button>
                <button ng-click="cancel()" class="btn btn-warning">Cancel</button>
              </div>
            </form>
          </div>
        </script>
        <script type="text/ng-template" id="modal__segments.html">
          <div class="modal-header">
            <h3 class="modal-title">[[modalTitle]]</h3>
          </div>
          <div class="modal-body">
            <table ng-show="segments.length" class="table table-condensed table-responsive">
              <thead>
                <tr>
                  <th ng-repeat="(columnName, value) in segments[0]" ng-bind="columnName.slice(0,1).toUpperCase() + columnName.slice(1)"></th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="segment in segments">
                  <td ng-repeat="(columnName, value) in segment" ng-bind="value"></td>
                </tr>
              </tbody>
            </table>
            <p ng-bind="message" ng-hide="segments.length" class="alert alert-warning"></p>
          </div>
          <div class="modal-footer">
            <button ng-click="cancel()" class="btn btn-primary">OK</button>
          </div>
        </script>
        <button ng-click="openModal('lg', 'create')" class="btn btn-success btn-md tablecontrol__create">Create Pixel</button>
        <div tooltip="[[editPixelTooltip]]" ng-show="gridOptions.data.length" class="tablecontrol_wrapper">
          <button ng-disabled="!$root.editedPixel" ng-click="openModal('lg', 'edit')" class="btn btn-success btn-md tablecontrol__edit">Edit Pixel</button>
        </div>
        <div tooltip="[[editPixelTooltip]]" ng-show="gridOptions.data.length" class="tablecontrol_wrapper">
          <button ng-disabled="!$root.editedPixel || $root.editedPixel.type.toLowerCase() == 'look-a-like'" class="btn btn-success btn-md tablecontrol__preview">View Pixel Code</button>
        </div>
        <div tooltip="[[editPixelTooltip]]" ng-show="gridOptions.data.length" class="tablecontrol_wrapper">
          <button ng-disabled="!$root.editedPixel || $root.editedPixel.type.toLowerCase() == 'look-a-like'" ng-click="openModal('lg', 'segments')" class="btn btn-success btn-md tablecontrol__segments">Recommended Segments</button>
        </div>
        <div tooltip="[[editPixelTooltip]]" ng-show="gridOptions.data.length" class="tablecontrol_wrapper">
          <button ng-disabled="!$root.editedPixel || $root.editedPixel.type.toLowerCase() == 'look-a-like'" class="btn btn-success btn-md tablecontrol__lookalike">Look-a-like</button>
        </div>
      </div>
      <div ng-class="{'tablegrid__visible': gridOptions.data.length}" class="tablegrid">
        <div role="alert" ng-hide="gridOptions.data.length" class="alert alert-info"><span>You haven't created any pixels yet! Please, create new one.</span></div>
        <div ng-show="gridOptions.data.length" ui-grid="gridOptions" external-scopes="gridScope" ui-grid-selection="ui-grid-selection" ui-grid-pinning="ui-grid-pinning" ui-grid-resize-columns="ui-grid-resize-columns" ui-grid-auto-resize="ui-grid-auto-resize" ui-grid-move-columns="ui-grid-move-columns" ui-grid-exporter="ui-grid-exporter" ui-grid-save-state="ui-grid-save-state" class="tablegrid_grid"></div>
      </div>
    </div>
  </div>
</div>
<div class="footer">
  <div class="footer_inner">
    <p class="footer_project-author">{{site.title}} maintained by <a href="https://github.com/yuriMalakhov">yuriMalakhov</a></p>
  </div>
</div>