// Generated by CoffeeScript 1.8.0
angular.module('app').directive("pixelCreateForm", [
  '$rootScope', '$timeout', function($rootScope, $timeout) {
    return {
      restrict: "CA",
      link: function(scope, elm, attrs) {
        var initValidation;
        initValidation = function() {
          return elm.formValidation({
            framework: 'bootstrap',
            icon: {
              valid: 'glyphicon glyphicon-ok',
              invalid: 'glyphicon glyphicon-remove',
              validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
              id: {
                validators: {
                  notEmpty: {
                    message: 'Pixel ID is required'
                  },
                  regexp: {
                    regexp: /^[\d|\w|\-|\_]*$/i,
                    message: 'Pixel ID can consist of alphabetical and digital characters as well ad "-" and "_" symbols only'
                  }
                }
              },
              name: {
                validators: {
                  notEmpty: {
                    message: 'Pixel Name is required'
                  },
                  stringLength: {
                    min: 3,
                    max: 255,
                    trim: true,
                    message: 'Pixel Name must be more then 3 and less than 255 characters'
                  }
                }
              }
            }
          });
        };
        $timeout(function() {
          return initValidation();
        }, 100);
        $rootScope.resetForm = function() {
          return elm.data('formValidation').resetForm();
        };
        $rootScope.updateForm = function() {
          elm.data('formValidation').destroy();
          return initValidation();
        };
        return elm.find(".sharing-options_add, .trash").click(function() {
          return $timeout(function() {
            $rootScope.updateForm();
            if (jQuery(this).hasClass(".trash")) {
              return scope.options.splice($index, 1);
            }
          }, 100);
        });
      }
    };
  }
]);
